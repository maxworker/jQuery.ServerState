<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery server state</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" />
</head>
<body>
<div class="container">
<h3>Function Test</h3>
<form id="jsonForm" method="post">

    <div class="form-group">
       <label for="message" class="mb-none"><strong>Message</strong></label>
       <input class="form-control" type="text" id="message" name="message" value="test" required=""/>
    </div>

    <input class="btn btn-success" type="submit" value="Submit" />
    <div id="result"></div>

    <br/>
    <input class="btn btn-primary" id="mSaveLoad" type="button" value="Manual Save and Load" /> 
    <input class="btn btn-warning" id="mLoad" type="button" value="Manual Load" />
    <input class="btn btn-success" id="mSave" type="button" value="Manual Save" />
    <input class="btn btn-default" id="mInit" type="button" value="Manual Init" />
</form>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="../dist/serverstate.min.js"></script>

<script>

+function($) {
  $(function () {

    $("#mSaveLoad").on("click", function(e){
       $("#jsonForm").stateSubmit({id:777},{ url:"simpletest.php", success:function(data){console.log("Form Saved");} });
    });

    $("#mLoad").on("click", function(e){
       $("#jsonForm").stateLoad({id:777},{url:"simpletest.php"});
    });

    $("#mSave").on("click", function(e){
       $("#jsonForm").stateSave({id:777},{url:"simpletest.php", validationCallback:function(){console.log("Form not valid");}, success:function(){console.log("Form Saved");} });
    });

    $("#mInit").on("click", function(e){
       $("#jsonForm").stateInit("simpletest.php");
    });

  });
}(jQuery);
</script>

</body>
</html>
