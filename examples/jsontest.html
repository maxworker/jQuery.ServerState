<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery server state</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" />
</head>
<body>
<div class="container">
<h3>Json Test</h3>
<form id="jsonForm" method="post">

    <div class="form-group">
       <label for="message" class="mb-none"><strong>Message</strong></label>
       <input class="form-control" type="text" id="message" name="message" value="test" required=""/>
    </div>

    <div id="result"></div>

    <br/>
    <input class="btn btn-primary" id="mLoad" type="button" value="Load" />
    <input class="btn btn-success" id="mSaveLoad" type="button" value="Json Submit" />
    <input class="btn btn-warning" id="mSave" type="button" value="Json Save" />

</form>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="../dist/serverstate.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>

<script>

+function($) {
  $(function () {

    $("#jsonForm").on('submit', function(event){
        event.preventDefault();
    });

    $("#mSaveLoad").on("click", function(e){
       $("#jsonForm").stateJsonSubmit({id:777},{ url:"jsontest.php", success:function(data){console.log("Form Saved");} });
    });

    $("#mLoad").on("click", function(e){
       $("#jsonForm").stateLoad({id:777},{url:"jsontest.php"});
    });

    $("#mSave").on("click", function(e){
       $("#jsonForm").stateJsonSave({id:777},{url:"jsontest.php", validationCallback:function(){console.log("Form not valid");}, success:function(){console.log("Form Saved");} });
    });

  });
}(jQuery);
</script>

</body>
</html>
